!function($){"use strict";$(function(){function lock_your_updates_change_theme_overlay(){var $url_parameters=window.location.search.replace(/\?/i,"").split("&"),$theme_id=null;if(jQuery.each($url_parameters,function($index,$value){var $this_parameter=$value.split("=");"theme"==$this_parameter[0].toLowerCase()&&($theme_id=$this_parameter[1])}),void 0!==$theme_id&&null!=$theme_id&&""!=$theme_id){var $theme_overlay=void 0;if(jQuery(".theme-overlay.active").length>0?$theme_overlay=jQuery(".theme-overlay.active"):jQuery(".theme-overlay").children(".theme-overlay").length>0&&($theme_overlay=jQuery(".theme-overlay").children(".theme-overlay").first()),void 0!==$theme_overlay&&null!=$theme_overlay&&!$theme_overlay.hasClass("lock-your-updates-themes")){$theme_overlay.addClass("lock-your-updates-themes");{var $theme_info=$theme_overlay.find(".theme-about .theme-info"),$theme_author=$theme_info.find(".theme-author"),$theme_name=$theme_info.find(".theme-name");$theme_info.find(".theme-description")}jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",async:!1,cache:!1,data:{action:"lock_your_updates_get_item_data",item_type:lock_your_updates.type,item_id:$theme_id,nonce_required:!1,get_update_message:!0},error:function(){},success:function($data){if($data&&void 0!==typeof $data&&null!=$data&&void 0!==typeof $data.locked&&null!=$data.locked&&0==$theme_overlay.find(".lock-your-updates-themes-header").length){var $new_theme_header=jQuery('<h4 class="lock-your-updates-themes-header"></h4>');$data.locked?($new_theme_header.addClass("locked"),$new_theme_header.append(lock_your_updates.type_locked)):($new_theme_header.addClass("unlocked"),$new_theme_header.append(lock_your_updates.type_unlocked)),$theme_author.length>0?$theme_author.after($new_theme_header):$theme_name.length>0?$theme_name.after($new_theme_header):$theme_info.length>0&&$theme_info.prepend($new_theme_header),void 0!==$data.locked&&$data.locked===!0&&void 0!==$data.update_available&&$data.update_available===!0&&void 0!==$data.update_message&&""!=$data.update_message&&0==$theme_info.find(".theme-update-message").length&&jQuery('<div class="theme-update-message lock-your-updates-theme-update-message"><h4 class="theme-update">'+lock_your_updates.update_available+"</h4><p><strong>"+$data.update_message+"</strong></p></div>").insertAfter($new_theme_header),void 0!==$data.notes_preview_html&&""!=$data.notes_preview_html&&jQuery($data.notes_preview_html).insertAfter($new_theme_header)}},complete:function(){}});var $theme_actions=$theme_overlay.find(".theme-actions"),$active_theme=$theme_actions.find(".active-theme"),$inactive_theme=$theme_actions.find(".inactive-theme");(0==$active_theme.find(".lock-updates-themes-actions").length||0==$inactive_theme.find(".lock-updates-themes-actions").length)&&jQuery.ajax({url:ajaxurl,type:"POST",dataType:"html",async:!1,cache:!1,data:{action:"lock_your_updates_get_theme_action_buttons",theme_id:$theme_id},error:function(){},success:function($actions_html){if(void 0!=$actions_html&&null!=$actions_html&&""!=$actions_html){var $lyu_themes_actions=jQuery('<div class="lock-updates-themes-actions"></div>').append($actions_html);0==$active_theme.find(".lock-updates-themes-actions").length&&$lyu_themes_actions.clone().appendTo($active_theme),0==$inactive_theme.find(".lock-updates-themes-actions").length&&$lyu_themes_actions.clone().appendTo($inactive_theme)}}}),$theme_overlay.lock_your_updates_setup_edit_notes_action()}}}lock_your_updates.is_network_active&&!lock_your_updates.is_network_admin||!lock_your_updates.is_network_active&&lock_your_updates.is_network_admin||lock_your_updates["can_update_"+lock_your_updates.type]&&(jQuery(".theme-overlay").bind("DOMNodeInserted",function(){jQuery(".theme-overlay").children(".theme-overlay").length>0&&lock_your_updates_change_theme_overlay()}),jQuery.fn.lock_your_updates_setup_edit_notes_action=function(){var $theme_overlay=jQuery(this);jQuery(".lock-your-updates-edit-notes").on("click",function($event){$event.preventDefault(),$theme_overlay.lock_your_updates_edit_theme_note(jQuery(this).attr("href"))})},jQuery.fn.lock_your_updates_edit_theme_note=function($href_with_args){{var $args={};$href_with_args.replace(/[?&]+([^=&]+)=([^&]*)/gi,function($m,$key,$value){$args[$key]=$value})}if(!(jQuery(".lock-your-updates-themes-edit-notes-area").length>0)){if(!("action"in $args&&"lock-your-updates-edit-notes-"+lock_your_updates.type==$args.action&&lock_your_updates.type in $args&&""!=$args[lock_your_updates.type]&&"_wpnonce"in $args&&""!=$args._wpnonce))return void alert(lock_your_updates.errors.load_notes);var $theme_overlay=jQuery(this);jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",async:!1,cache:!1,data:{action:"lock_your_updates_get_item_data",item_type:lock_your_updates.type,item_id:$args[lock_your_updates.type],nonce_required:!0,nonce:$args._wpnonce},error:function(){alert(lock_your_updates.errors.load_notes)},success:function($data){if(!$data||void 0===typeof $data||null==$data)return void alert(lock_your_updates.errors.load_notes);if(void 0===typeof $data.passed_nonce||null==$data.passed_nonce||!$data.passed_nonce)return void alert(lock_your_updates.errors.load_notes);if(void 0===typeof $data.name||null==$data.name||void 0===typeof $data.locked||null==$data.locked)return void alert(lock_your_updates.errors.load_notes);var $theme_header=$theme_overlay.find(".lock-your-updates-themes-header"),$lyu_edit_theme_notes=jQuery('<div class="lock-your-updates-themes-edit-notes-area"></div>');$lyu_edit_theme_notes.addClass($data.locked?"locked":"unlocked"),$lyu_edit_theme_notes.append('<div class="icon"></div>'),$lyu_edit_theme_notes.append('<h3><span class="notes-for">'+lock_your_updates.notes_for+"</span> "+$data.name+"</h3>"),$lyu_edit_theme_notes.append($data.locked?'<h4 class="locked">'+lock_your_updates.type_locked+"</h4>":'<h4 class="unlocked">'+lock_your_updates.type_unlocked+"</h4>");var $lyu_edit_theme_notes_textarea=jQuery("<textarea></textarea>");void 0!=$data.notes&&null!=$data.notes&&$lyu_edit_theme_notes_textarea.val($data.notes),$lyu_edit_theme_notes.append($lyu_edit_theme_notes_textarea);var $lyu_edit_theme_notes_save_button=jQuery('<a class="button-primary save alignleft" href="" accesskey="s">Save</a>');$lyu_edit_theme_notes_save_button.on("click",function($event){$event.preventDefault(),$theme_overlay.lock_your_updates_save_theme_note($args,$lyu_edit_theme_notes_textarea.val())}),$lyu_edit_theme_notes.append($lyu_edit_theme_notes_save_button);var $lyu_edit_theme_notes_cancel_button=jQuery('<a class="button-secondary cancel alignleft" href="" accesskey="c">Cancel</a>');$lyu_edit_theme_notes_cancel_button.on("click",function($event){$event.preventDefault(),$theme_overlay.lock_your_updates_close_edit_theme_note()}),$lyu_edit_theme_notes.append($lyu_edit_theme_notes_cancel_button),$theme_header.hide(),jQuery(".lock-your-updates-themes-notes-preview-area").hide(),$lyu_edit_theme_notes.hide().insertAfter($theme_header).fadeIn()},complete:function(){}})}},jQuery.fn.lock_your_updates_save_theme_note=function($args,$notes){if("action"in $args&&"lock-your-updates-edit-notes-"+lock_your_updates.type==$args.action&&lock_your_updates.type in $args&&""!=$args[lock_your_updates.type]&&"_wpnonce"in $args&&""!=$args._wpnonce){var $theme_overlay=jQuery(this),$theme_item_id=$args[lock_your_updates.type];jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",async:!1,cache:!1,data:{action:"lock_your_updates_save_item_notes",item_type:lock_your_updates.type,item_id:$theme_item_id,nonce:$args._wpnonce,item_notes:$notes},error:function(){alert(lock_your_updates.errors.save_notes)},success:function($data){if(!$data||void 0===typeof $data||null==$data)return void alert(lock_your_updates.errors.save_notes);if(void 0===typeof $data.passed_nonce||null==$data.passed_nonce||!$data.passed_nonce)return void alert(lock_your_updates.errors.save_notes);if(void 0==$data.saved_note||null==$data.saved_note||!$data.saved_note)return void alert(lock_your_updates.errors.save_notes);var $successfully_saved_notes="item_notes"in $data?$data.item_notes:null,$current_theme_notes_preview_area=jQuery(".lock-your-updates-themes-notes-preview-area");void 0===$successfully_saved_notes||""==$successfully_saved_notes?$current_theme_notes_preview_area.remove():jQuery.ajax({url:ajaxurl,type:"POST",dataType:"html",async:!1,cache:!1,data:{action:"lock_your_updates_get_themes_preview_notes_area",item_id:$theme_item_id,item_notes:$successfully_saved_notes},error:function(){},success:function($preview_notes_html){if(void 0!==$preview_notes_html&&""!=$preview_notes_html){var $preview_notes_area=jQuery($preview_notes_html);0==$current_theme_notes_preview_area.length?$preview_notes_area.insertAfter(".lock-your-updates-themes-header"):$current_theme_notes_preview_area.replaceWith($preview_notes_area),$theme_overlay.lock_your_updates_setup_edit_notes_action()}},complete:function(){}});var $lyu_edit_notes_area=$theme_overlay.find(".lock-your-updates-themes-edit-notes-area"),$lyu_checkmark_left=$lyu_edit_notes_area.offset().left,$lyu_checkmark_top=$lyu_edit_notes_area.offset().top;$theme_overlay.lock_your_updates_close_edit_theme_note();var $lyu_checkmark=jQuery('<div class="lock-your-updates-checkmark"></div>').css({left:$lyu_checkmark_left+"px",top:$lyu_checkmark_top+"px"}).hide();$lyu_checkmark.appendTo(jQuery("body")).show().animate({opacity:0},1e3,function(){$lyu_checkmark.remove()})},complete:function(){}})}},jQuery.fn.lock_your_updates_close_edit_theme_note=function(){var $theme_overlay=jQuery(this);$theme_overlay.find(".lock-your-updates-themes-edit-notes-area").remove(),$theme_overlay.find(".lock-your-updates-themes-header").fadeIn(),jQuery(".lock-your-updates-themes-notes-preview-area").fadeIn()})})}(jQuery);