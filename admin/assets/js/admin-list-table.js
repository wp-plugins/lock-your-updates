!function($){"use strict";$(function(){if(!(lock_your_updates.is_network_active&&!lock_your_updates.is_network_admin||!lock_your_updates.is_network_active&&lock_your_updates.is_network_admin)&&lock_your_updates["can_update_"+lock_your_updates.type]&&(jQuery("table.plugins").find("tr.lock-your-updates-update-tr, tr.lock-your-updates-preview-notes-tr").each(function(){var $file=jQuery(this).data("file");void 0!==$file&&null!==$file&&(jQuery(this).hasClass("lock-your-updates-update-tr")&&jQuery("tr#"+$file).addClass("update").addClass("lock-updates-update"),jQuery(this).hasClass("lock-your-updates-preview-notes-tr")&&jQuery("tr#"+$file).addClass("preview-lock-updates-notes"))}),lock_your_updates.is_multisite||"themes"!=lock_your_updates.type)){if(jQuery(".wrap > h2").length>0){var $action="",$message_type="",$message="",$params=window.location.search.substring(1);if($params=$params.split("&"),jQuery.each($params,function($index,$value){var $pair=$value.split("=");$pair.length>=2&&("action"==$pair[0]?$action=$pair[1]:"empty"==$pair[0]?($message_type="empty",$message=$pair[1]):"error"==$pair[0]?($message_type="error",$message=$pair[1]):"success"==$pair[0]&&($message_type="success",$message=$pair[1]))}),""!=$action&&""!=$message_type&&""!=$message){var $message_to_show="",$message_class="success"==$message_type?"updated":"error";$message_type in lock_your_updates.confirmations&&$action in lock_your_updates.confirmations[$message_type]&&($message_to_show=lock_your_updates.confirmations[$message_type][$action]),""!=$message_to_show&&jQuery(".wrap > h2").after('<div id="message" class="'+$message_class+'"><p>'+$message_to_show+"</p></div>")}}jQuery(".bulkactions").length>0&&jQuery(".bulkactions").find('select[name="action"]').append('<option value="lock-selected-updates">'+lock_your_updates.lock_updates_text+'</option><option value="unlock-selected-updates">'+lock_your_updates.unlock_updates_text+"</option>"),jQuery(".lock-your-updates-edit-notes").on("click",function($event){$event.preventDefault(),jQuery("#"+jQuery(this).data("item-row")).lock_your_updates_list_table_edit_note(jQuery(this).attr("href"))}),jQuery.fn.lock_your_updates_list_table_edit_note=function($href_with_args){{var $args={};$href_with_args.replace(/[?&]+([^=&]+)=([^&]*)/gi,function($m,$key,$value){$args[$key]=$value})}if("action"in $args&&"lock-your-updates-edit-notes-"+lock_your_updates.type==$args.action&&lock_your_updates.type in $args&&""!=$args[lock_your_updates.type]&&"_wpnonce"in $args&&""!=$args._wpnonce){var $item_row=jQuery(this);if(""!=$item_row.attr("id")){var $item_row_children_count=$item_row.children().length,$item_html_id=$item_row.attr("id"),$update_row=void 0;jQuery("#lock-your-updates-update-"+$item_html_id+"-row").length>0?$update_row=jQuery("#lock-your-updates-update-"+$item_html_id+"-row"):$item_row.next().hasClass("plugin-update-tr")&&($update_row=$item_row.next());var $preview_notes_row=jQuery("#lock-your-updates-"+$item_html_id+"-preview-notes-row"),$edit_notes_row_id="lock-your-updates-edit-"+$item_html_id+"-notes";if(!(jQuery("tr#"+$edit_notes_row_id).length>0)){var $edit_notes_row=jQuery('<tr id="'+$edit_notes_row_id+'" class="lock_your_updates_inline_edit_notes inline-edit-row"></tr>');$item_row.hasClass("active")&&$edit_notes_row.addClass("active"),$item_row.hasClass("update")&&$edit_notes_row.addClass("update");var $edit_notes_row_td_wrapper=jQuery('<td class="wrapper loading"></td>');$edit_notes_row_td_wrapper.height($item_row.outerHeight()),$item_row_children_count>1&&$edit_notes_row_td_wrapper.attr("colspan",$item_row_children_count),$edit_notes_row.append($edit_notes_row_td_wrapper),$item_row.hide();var $edit_notes_row_added=!1;void 0!==$preview_notes_row&&$preview_notes_row.length>0&&($edit_notes_row.hide().insertAfter($preview_notes_row).fadeIn(),$edit_notes_row_added=!0,$preview_notes_row.hide()),void 0!==$update_row&&$update_row.length>0&&($edit_notes_row_added||($edit_notes_row.hide().insertAfter($update_row).fadeIn(),$edit_notes_row_added=!0),$update_row.hide()),$edit_notes_row_added||$edit_notes_row.hide().insertAfter($item_row).fadeIn(),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",async:!1,cache:!1,data:{action:"lock_your_updates_get_item_data",item_type:lock_your_updates.type,item_id:$args[lock_your_updates.type],nonce_required:!0,nonce:$args._wpnonce},error:function(){$item_row.lock_your_updates_list_table_edit_notes_error()},success:function($data){if(!$data||void 0===typeof $data||null==$data)return void $item_row.lock_your_updates_list_table_edit_notes_error();if(void 0===typeof $data.passed_nonce||null==$data.passed_nonce||!$data.passed_nonce)return void $item_row.lock_your_updates_list_table_edit_notes_error();if(void 0===typeof $data.name||null==$data.name||void 0===typeof $data.locked||null==$data.locked)return void $item_row.lock_your_updates_list_table_edit_notes_error();var $edit_notes_row_table=jQuery('<table cellpadding="0" cellspacing="0" border="0"></table>');$edit_notes_row_table.append("<tr></tr>");var $edit_notes_row_td_icon=jQuery('<td class="icon"></td>');$edit_notes_row_td_icon.append($data.locked?'<div class="locked-update-icon"></div>':'<div class="unlocked-update-icon"></div>'),$edit_notes_row_table.find("tr").append($edit_notes_row_td_icon).fadeIn();var $edit_notes_row_td_main=jQuery('<td class="main"></td>');$edit_notes_row_td_main.append('<h3><span class="notes-for">'+lock_your_updates.notes_for+"</span> "+$data.name+"</h3>"),$edit_notes_row_td_main.append($data.locked?'<h4 class="locked">'+lock_your_updates.type_locked+"</h4>":'<h4 class="unlocked">'+lock_your_updates.type_unlocked+"</h4>");var $edit_notes_row_textarea=jQuery("<textarea></textarea>");void 0!=$data.notes&&null!=$data.notes&&$edit_notes_row_textarea.val($data.notes),$edit_notes_row_td_main.append($edit_notes_row_textarea);var $edit_notes_row_save_button=jQuery('<a class="button-primary save alignleft" href="" accesskey="s">Save</a>');$edit_notes_row_save_button.on("click",function($event){$event.preventDefault(),$item_row.lock_your_updates_list_table_save_note($args,$edit_notes_row_textarea.val())}),$edit_notes_row_td_main.append($edit_notes_row_save_button);var $edit_notes_row_cancel_button=jQuery('<a class="button-secondary cancel alignleft" href="" accesskey="c">Cancel</a>');$edit_notes_row_cancel_button.on("click",function($event){$event.preventDefault(),$item_row.lock_your_updates_list_table_close_edit_note()}),$edit_notes_row_td_main.append($edit_notes_row_cancel_button),$edit_notes_row_table.find("tr").append($edit_notes_row_td_main),$edit_notes_row_td_wrapper.append($edit_notes_row_table),$edit_notes_row_td_wrapper.removeClass("loading").css("height","auto")},complete:function(){}})}}}},jQuery.fn.lock_your_updates_list_table_save_note=function($args,$notes){if("action"in $args&&"lock-your-updates-edit-notes-"+lock_your_updates.type==$args.action&&lock_your_updates.type in $args&&""!=$args[lock_your_updates.type]&&"_wpnonce"in $args&&""!=$args._wpnonce){var $item_row=jQuery(this);if(""!=$item_row.attr("id")){var $item_html_id=$item_row.attr("id"),$item_id=$args[lock_your_updates.type];jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",async:!1,cache:!1,data:{action:"lock_your_updates_save_item_notes",item_type:lock_your_updates.type,item_id:$item_id,nonce:$args._wpnonce,item_notes:$notes},error:function(){alert(lock_your_updates.errors.save_notes)},success:function($data){if(!$data||void 0===typeof $data||null==$data)return void alert(lock_your_updates.errors.save_notes);if(void 0===typeof $data.passed_nonce||null==$data.passed_nonce||!$data.passed_nonce)return void alert(lock_your_updates.errors.save_notes);if(void 0==$data.saved_note||null==$data.saved_note||!$data.saved_note)return void alert(lock_your_updates.errors.save_notes);var $successfully_saved_notes=null;if("item_notes"in $data){$successfully_saved_notes=$data.item_notes;var $notes_icon=$item_row.find("td.column-lock-your-updates").find(".icon-wrapper.notes");null!=$data.item_notes&&""!=$data.item_notes?$notes_icon.removeClass("empty"):$notes_icon.addClass("empty")}var $item_update_row=jQuery("#lock-your-updates-update-"+$item_html_id+"-row"),$item_preview_row=jQuery("#lock-your-updates-"+$item_html_id+"-preview-notes-row");void 0===$successfully_saved_notes||""==$successfully_saved_notes?($item_preview_row.remove(),$item_row.removeClass("preview-lock-updates-notes"),$item_update_row.removeClass("lock-your-updates-item-has-notes")):jQuery.ajax({url:ajaxurl,type:"POST",dataType:"html",async:!1,cache:!1,data:{action:"lock_your_updates_get_item_preview_notes_row",item_type:lock_your_updates.type,item_id:$item_id,item_html_id:$item_html_id,wp_list_table_column_count:$item_row.children().length,item_notes:$successfully_saved_notes},error:function(){},success:function($preview_notes_html){if(void 0!==$preview_notes_html&&""!=$preview_notes_html){var $preview_notes_row=jQuery($preview_notes_html);0==$item_preview_row.length?($item_row.addClass("preview-lock-updates-notes"),$item_update_row.length>0?($item_update_row.addClass("lock-your-updates-item-has-notes"),$preview_notes_row.insertAfter($item_update_row)):$preview_notes_row.insertAfter($item_row)):$item_preview_row.replaceWith($preview_notes_row),jQuery(".lock-your-updates-edit-notes").on("click",function($event){$event.preventDefault(),jQuery("#"+jQuery(this).data("item-row")).lock_your_updates_list_table_edit_note(jQuery(this).attr("href"))})}},complete:function(){}}),$item_row.lock_your_updates_list_table_close_edit_note();var $checkmark=jQuery('<div class="lock-your-updates-checkmark"></div>').hide();$checkmark.appendTo(jQuery("body")).css({width:$item_row.outerWidth(),height:$item_row.outerHeight(),left:$item_row.offset().left+"px",top:$item_row.offset().top+"px","background-size":$item_row.outerHeight()+"px"}).show().animate({opacity:0},1e3,function(){$checkmark.remove()})},complete:function(){}})}}},jQuery.fn.lock_your_updates_list_table_close_edit_note=function(){var $item_row=jQuery(this),$item_html_id=$item_row.attr("id");jQuery("tr#lock-your-updates-edit-"+$item_html_id+"-notes").remove(),$item_row.fadeIn(),jQuery("#lock-your-updates-update-"+$item_html_id+"-row").length>0?jQuery("#lock-your-updates-update-"+$item_html_id+"-row").fadeIn():$item_row.next().hasClass("plugin-update-tr")&&$item_row.next().fadeIn(),jQuery("#lock-your-updates-"+$item_html_id+"-preview-notes-row").length>0&&jQuery("#lock-your-updates-"+$item_html_id+"-preview-notes-row").fadeIn()},jQuery.fn.lock_your_updates_list_table_edit_notes_error=function($message){var $item_row=jQuery(this),$item_html_id=$item_row.attr("id"),$edit_notes_wrapper=jQuery("tr#lock-your-updates-edit-"+$item_html_id+"-notes td.wrapper");(void 0===$message||""==$message)&&($message=lock_your_updates.errors.load_notes);var $close_button=jQuery('<a class="button-secondary close" href="" accesskey="c">Close this message</a>');$close_button.on("click",function($event){$event.preventDefault(),$item_row.lock_your_updates_list_table_close_edit_note()}),$edit_notes_wrapper.append("<p>"+$message+"</p>").append($close_button).removeClass("loading").addClass("error")}}})}(jQuery);